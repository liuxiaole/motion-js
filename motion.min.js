!function(root,factory){"function"==typeof define&&define.amd?define(["jquery"],factory):root.Motion=factory(root.jQuery)}(this,function(jQuery){function Path(path){this.pathEl=this.createPathEl(path),this.pathTotalLength=this.pathEl.getTotalLength()}function Motion(el,options){this.constructor.isSupport&&(this.path=new Path(options.path)),this.options=jQuery.extend({},this.defaultOptions,options),this.el=jQuery(el),this.animQueue=[],this.animating=!1}Path.prototype.createPathEl=function(path){var SVG_NS="http://www.w3.org/2000/svg",pathEl=document.createElementNS(SVG_NS,"path");return pathEl.setAttribute("d",path),pathEl},Path.prototype.getAt=function(percent){var len1=this.pathTotalLength*percent,len0=len1-.5,len2=len1+.5;len0<0&&(len0=0),len2>this.pathTotalLength&&(len2=this.pathTotalLength);var point0=this.pathEl.getPointAtLength(len0),point1=this.pathEl.getPointAtLength(len1),point2=this.pathEl.getPointAtLength(len2),dx=point2.x-point0.x,dy=point2.y-point0.y,rotate=Math.atan(dy/dx);return dx<0&&(rotate+=Math.PI),{x:point1.x,y:point1.y,rotate:rotate/Math.PI*180%360}},Motion.isSupport=!0;try{var p=new Path("M0 0L10 10");p.getAt(.5)}catch(e){Motion.isSupport=!1}return Motion.prototype.to=function(dest,timing){return"number"==typeof dest&&(dest={offset:dest}),"number"==typeof timing&&(timing={duration:timing}),timing=jQuery.extend({},this.defaultTiming,timing),timing.complete=jQuery.proxy(timing.complete||jQuery.noop,this),timing.step=jQuery.proxy(this.step,this),this.animQueue.push([dest,timing]),this.checkAnimQueue(),this},Motion.prototype.checkAnimQueue=function(){if(!this.animating&&0!==this.animQueue.length){var args=this.animQueue.shift();this.animating=!0,jQuery.Animation(this.options,args[0],args[1]).then(jQuery.proxy(function(){this.animating=!1,this.checkAnimQueue()},this))}},Motion.prototype.defaultOptions={path:"",offset:0,rotation:"auto"},Motion.prototype.defaultTiming={duration:1e3,easing:"linear"},Motion.prototype.step=function(offset){if(this.path){var pos=this.path.getAt(offset),translate="translate(-50%, -50%) translate("+pos.x+"px,"+pos.y+"px)",rotation=this.options.rotation,rotate="rotate("+("auto"===rotation?pos.rotate:rotation)+"deg)";this.el.css({transform:translate+" "+rotate})}},Motion});
//# sourceMappingURL=motion.min.js.map